(this["webpackJsonpgrocery-list"]=this["webpackJsonpgrocery-list"]||[]).push([[0],{107:function(e,n,t){},116:function(e,n,t){"use strict";t.r(n);var a=t(18),r=t(6),c=t(0),i=t.n(c),o=t(14),d=t.n(o),l=(t(107),t(19)),u=t(160),s=t(118),j=t(162),b=t(161),m=t(71),h=t(87),O=t.n(h),p=t(85),f=t.n(p),v=t(86),x=t.n(v),g=t(119),I=t(165),S=t(167),y=t(158),w=t(157),$=t(24),C=t.n($),_=t(25),D=t(148),k=t(163);function E(){return Math.round(20*Math.random())-10}function q(){var e=50+E(),n=50+E();return{top:"".concat(e,"%"),left:"".concat(n,"%"),transform:"translate(-".concat(e,"%, -").concat(n,"%)")}}var M=Object(D.a)((function(e){return{paper:{position:"absolute",width:"70%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function A(e,n){var t=e.OpenModal,a=e.BodyModal,c=M(),o=i.a.useState(q),d=Object(l.a)(o,1)[0],u=i.a.useState(!1),s=Object(l.a)(u,2),j=s[0],b=s[1],m=Object(r.jsx)("div",{style:d,className:c.paper,children:a});return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{onClick:function(){b(!0)},children:t}),Object(r.jsx)(k.a,{open:j,onClose:function(){b(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:m})]})}var B=t(65),N=t(152),T=t(164),F=t(156);function L(){var e=Object(a.a)(["\n  mutation editItem($_id: String!, $name: String!, $shopID: [String]) {\n    editItem(_id: $_id, name: $name, shopID: $shopID) {\n      name\n    }\n  }\n"]);return L=function(){return e},e}function R(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n\n      item {\n        id\n        name\n      }\n    }\n  }\n"]);return R=function(){return e},e}var P=C()(R()),W=C()(L());function J(e){var n=e.id,t=e.name,a=e.shop,i=Object(_.a)(W),o=Object(l.a)(i,1)[0],d=Object(_.b)(P).data,u=Object(c.useState)(""),s=Object(l.a)(u,2),j=s[0],b=s[1],m=Object(c.useState)(),h=Object(l.a)(m,2),O=h[0],p=h[1];Object(c.useEffect)((function(){b(t),console.log(a),a&&p(a.map((function(e){return{value:e.id,label:e.name}})))}),[]);var f=d?d.shops.map((function(e){return{label:e.name,value:e.id}})):{label:"Loading",value:"1"};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Edit Item"}),Object(r.jsx)("form",{onSubmit:function(e){var t;O&&O.length>0?(o({variables:{_id:n,name:j,shopID:(t=O,t.map((function(e){return e.value})))}}).then((function(){return window.location.reload()})),b("")):alert("Select a shop"),e.preventDefault()},children:Object(r.jsxs)(N.a,{container:!0,spacing:3,children:[Object(r.jsx)(N.a,{item:!0,xs:12,sm:5,children:Object(r.jsx)(T.a,{value:j,required:!0,id:"edititem",name:"edititem",label:"Edit item",fullWidth:!0,autoComplete:"given-name",onChange:function(e){b(e.target.value)}})}),Object(r.jsx)(N.a,{item:!0,xs:12,sm:4,children:Object(r.jsx)(B.a,{options:f,value:O,onChange:p,labelledBy:"Select"})}),Object(r.jsx)(N.a,{item:!0,xs:12,sm:3,children:Object(r.jsx)(F.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})})]})})]})}function Q(){var e=Object(a.a)(["\n  mutation updateOrderedItem($_id: String!, $ordered: Boolean!) {\n    updateOrderedItem(_id: $_id, ordered: $ordered) {\n      name\n    }\n  }\n"]);return Q=function(){return e},e}function z(){var e=Object(a.a)(["\n  mutation updateCompletedItem($_id: String!, $completed: Boolean!) {\n    updateCompletedItem(_id: $_id, completed: $completed) {\n      name\n    }\n  }\n"]);return z=function(){return e},e}function G(){var e=Object(a.a)(["\n  mutation deleteItem($_id: String!) {\n    deleteItem(_id: $_id) {\n      name\n    }\n  }\n"]);return G=function(){return e},e}var H=C()(G()),K=C()(z()),U=C()(Q());function V(e){var n=e.name,t=e.id,a=e.completed,c=e.ordered,i=e.shop,o=Object(_.a)(H),d=Object(l.a)(o,1)[0],u=Object(_.a)(K),s=Object(l.a)(u,1)[0],j=Object(_.a)(U),b=Object(l.a)(j,1)[0],m="checkbox-list-label-".concat(t);return Object(r.jsxs)(g.a,{role:void 0,dense:!0,button:!0,children:[Object(r.jsx)(I.a,{edge:"start",onClick:function(){s({variables:{_id:t,completed:!a}}).then((function(){return window.location.reload()}))}}),Object(r.jsx)("span",{}),Object(r.jsx)(S.a,{style:{fontWeight:"bold",textDecoration:a||c?"line-through":"none"},id:m,primary:n}),Object(r.jsxs)(y.a,{children:[Object(r.jsx)(A,{OpenModal:Object(r.jsx)(w.a,{edge:"end","aria-label":"ordered",children:Object(r.jsx)(f.a,{})}),BodyModal:Object(r.jsx)(J,{id:t,name:n,shop:i})}),Object(r.jsx)(w.a,{onClick:function(){b({variables:{_id:t,ordered:!c}}).then((function(){return window.location.reload()}))},edge:"end","aria-label":"ordered",children:Object(r.jsx)(x.a,{})}),Object(r.jsx)(w.a,{onClick:function(){window.confirm("Are you sure you want to delete ".concat(n,"?"))&&d({variables:{_id:t}}).then((function(){return window.location.reload()}))},edge:"end","aria-label":"delete",children:Object(r.jsx)(O.a,{})})]})]},t)}var X=t(159),Y=t(155),Z=Object(D.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),ee=function(e){var n=e.items,t=Z();return Object(r.jsx)(Y.a,{className:t.root,children:Object(r.jsx)(X.a,{variant:"outlined",children:Object(r.jsx)(u.a,{children:n.map((function(e){return Object(c.createElement)(V,Object(m.a)(Object(m.a)({},e),{},{key:e.id}))}))})})})};function ne(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n\n      item {\n        id\n        name\n      }\n    }\n  }\n"]);return ne=function(){return e},e}function te(){var e=Object(a.a)(["\n  mutation addItem_API($name: String!, $shopID: [String]) {\n    addItem_API(name: $name, shopID: $shopID) {\n      id\n      name\n      shop {\n        id\n        name\n      }\n    }\n  }\n"]);return te=function(){return e},e}var ae=C()(te()),re=C()(ne()),ce=function(){var e=Object(_.b)(re).data,n=Object(_.a)(ae),t=Object(l.a)(n,1)[0],a=Object(c.useState)(""),i=Object(l.a)(a,2),o=i[0],d=i[1],u=Object(c.useState)(),s=Object(l.a)(u,2),j=s[0],b=s[1],m=e?e.shops.map((function(e){return{label:e.name,value:e.id}})):{label:"Loading",value:"1"};return Object(r.jsx)("div",{children:Object(r.jsx)("form",{onSubmit:function(e){var n;j&&j.length>0?(t({variables:{name:o,shopID:(n=j,n.map((function(e){return e.value})))}}).then((function(){return window.location.reload()})),d("")):alert("Select a shop"),e.preventDefault()},children:Object(r.jsxs)(N.a,{container:!0,spacing:3,children:[Object(r.jsx)(N.a,{item:!0,xs:12,sm:5,children:Object(r.jsx)(T.a,{value:o,required:!0,id:"newitem",name:"newitem",label:"Add new item",fullWidth:!0,autoComplete:"given-name",onChange:function(e){d(e.target.value)}})}),Object(r.jsx)(N.a,{item:!0,xs:12,sm:4,children:Object(r.jsx)(B.a,{options:m,value:j,onChange:b,labelledBy:"Select"})}),Object(r.jsx)(N.a,{item:!0,xs:12,sm:3,children:Object(r.jsx)(F.a,{variant:"contained",color:"primary",type:"submit",children:"Add item"})})]})})})};function ie(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n    }\n  }\n"]);return ie=function(){return e},e}function oe(){var e=Object(a.a)(["\n  query getItems {\n    items {\n      id\n      name\n      completed\n      ordered\n      shop {\n        id\n        name\n      }\n    }\n  }\n"]);return oe=function(){return e},e}var de=C()(oe()),le=C()(ie()),ue=function(){var e=function(e){if(t&&e){var n=null;x("0"===e?t.items:t.items.filter((function(t){return t.shop&&(n=t.shop.filter((function(n){return n.id===e}))),n.length>0?t:null})))}},n=Object(_.b)(de),t=n.data,a=n.loading,i=n.error,o=Object(_.b)(le).data,d=Object(c.useState)(localStorage.getItem("selectedshop")?localStorage.getItem("selectedshop"):""),m=Object(l.a)(d,2),h=m[0],O=m[1],p=Object(c.useState)(),f=Object(l.a)(p,2),v=f[0],x=f[1];if(Object(c.useEffect)((function(){e(localStorage.getItem("selectedshop")?localStorage.getItem("selectedshop"):null)}),[t]),a)return Object(r.jsx)("p",{children:"loading..."});if(i)return Object(r.jsx)("p",{children:"ERROR"});if(!t)return Object(r.jsx)("p",{children:"Not found"});t&&!v&&x(t.items);return Object(r.jsx)("div",{style:{paddingTop:"5%"},children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsxs)(j.a,{labelId:"select-label",id:"select",value:h,onChange:function(n){O(n.target.value),localStorage.setItem("selectedshop",n.target.value),e(n.target.value)},children:[Object(r.jsx)(b.a,{value:"0",children:"All"}),o?o.shops.map((function(e){return Object(r.jsx)(b.a,{value:e.id,children:e.name},e.id)})):Object(r.jsx)(b.a,{value:1,children:"Loading"})]}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(ce,{}),Object(r.jsx)("h1",{children:"ITEMS"}),Object(r.jsx)(ee,{items:v?v.filter((function(e){return!e.completed&&!e.ordered})):v})]}),Object(r.jsx)("h1",{children:"ORDERED ITEMS"}),Object(r.jsx)(ee,{items:v?v.filter((function(e){return e.ordered&&!e.completed})):v}),Object(r.jsx)("h1",{children:"DONE ITEMS"}),Object(r.jsx)(ee,{items:v?v.filter((function(e){return e.completed})):v})]})})})};var se=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)(ue,{})})})},je=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,168)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),a(e),r(e),c(e),i(e)}))},be=t(21),me=t(90),he=t(88),Oe=t(49),pe=t(89);function fe(){var e=Object(a.a)(["\n  {\n    items @client\n  }\n"]);return fe=function(){return e},e}function ve(){var e=Object(a.a)(["\n    extend type Mutation {\n        AddItem(item: Item!): [Item]\n    }\n"]);return ve=function(){return e},e}var xe=C()(ve()),ge=C()(fe()),Ie={Mutation:{addItem:function(e,n,t){var a=n.item,r=t.cache,c=function(e,n){return e.find((function(e){return e.name===n.name}))?(console.log("Item is already added"),e):[].concat(Object(pe.a)(e),[n])}(r.readQuery({query:ge}).items,a);return r.writeQuery({query:ge,data:{items:c}}),c}}};function Se(){var e=Object(a.a)(["\n  {\n    \n      items\n      {\n        id\n        name    \n        shop{\n          id\n          name      \n        }\n      }\n    \n  }\n  "]);return Se=function(){return e},e}var ye=Object(me.a)({uri:"https://grocery-list-louise.herokuapp.com/graphql"}),we=new he.a,$e=new Oe.a({link:ye,cache:we,typeDefs:xe,resolvers:Ie});$e.query({query:C()(Se())}).then((function(e){return null})),d.a.render(Object(r.jsx)(be.a,{client:$e,children:Object(r.jsx)(se,{})}),document.getElementById("root")),je()}},[[116,1,2]]]);
//# sourceMappingURL=main.b2435411.chunk.js.map