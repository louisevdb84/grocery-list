(this["webpackJsonpgrocery-list"]=this["webpackJsonpgrocery-list"]||[]).push([[0],{107:function(e,n,t){},116:function(e,n,t){"use strict";t.r(n);var a=t(19),r=t(6),i=t(0),c=t.n(i),o=t(14),d=t.n(o),l=(t(107),t(15)),u=t(161),s=t(118),j=t(163),b=t(162),m=t(72),h=t(65),O=t(88),p=t.n(O),f=t(86),x=t.n(f),v=t(87),g=t.n(v),I=t(119),S=t(157),y=t(166),w=t(158),C=t(168),$=t(159),_=t(24),k=t.n(_),D=t(25),E=t(148),q=t(164);function M(){return Math.round(20*Math.random())-10}function A(){var e=50+M(),n=50+M();return{top:"".concat(e,"%"),left:"".concat(n,"%"),transform:"translate(-".concat(e,"%, -").concat(n,"%)")}}var B=Object(E.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function N(e,n){var t=e.OpenModal,a=e.BodyModal,i=B(),o=c.a.useState(A),d=Object(l.a)(o,1)[0],u=c.a.useState(!1),s=Object(l.a)(u,2),j=s[0],b=s[1],m=Object(r.jsx)("div",{style:d,className:i.paper,children:a});return Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{onClick:function(){b(!0)},children:t}),Object(r.jsx)(q.a,{open:j,onClose:function(){b(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:m})]})}var R=t(66),T=t(152),L=t(165),P=t(156);function F(){var e=Object(a.a)(["\n  mutation editItem($_id: String!, $name: String!, $shopID: [String]) {\n    editItem(_id: $_id, name: $name, shopID: $shopID) {\n      name\n    }\n  }\n"]);return F=function(){return e},e}function W(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n\n      item {\n        id\n        name\n      }\n    }\n  }\n"]);return W=function(){return e},e}var J=k()(W()),Q=k()(F());function z(e){var n=e.id,t=e.name,a=e.shop,c=Object(D.a)(Q),o=Object(l.a)(c,1)[0],d=Object(D.b)(J).data,u=Object(i.useState)(""),s=Object(l.a)(u,2),j=s[0],b=s[1],m=Object(i.useState)(),h=Object(l.a)(m,2),O=h[0],p=h[1];Object(i.useEffect)((function(){b(t),console.log(a),a&&p(a.map((function(e){return{value:e.id,label:e.name}})))}),[]);var f=d?d.shops.map((function(e){return{label:e.name,value:e.id}})):{label:"Loading",value:"1"};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Edit Item"}),Object(r.jsx)("form",{onSubmit:function(e){var t;O&&O.length>0?(o({variables:{_id:n,name:j,shopID:(t=O,t.map((function(e){return e.value})))}}).then((function(){return window.location.reload()})),b("")):alert("Select a shop"),e.preventDefault()},children:Object(r.jsxs)(T.a,{container:!0,spacing:3,children:[Object(r.jsx)(T.a,{item:!0,xs:12,sm:5,children:Object(r.jsx)(L.a,{value:j,required:!0,id:"edititem",name:"edititem",label:"Edit item",fullWidth:!0,autoComplete:"given-name",onChange:function(e){b(e.target.value)}})}),Object(r.jsx)(T.a,{item:!0,xs:12,sm:4,children:Object(r.jsx)(R.a,{options:f,value:O,onChange:p,labelledBy:"Select"})}),Object(r.jsx)(T.a,{item:!0,xs:12,sm:3,children:Object(r.jsx)(P.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})})]})})]})}function G(){var e=Object(a.a)(["\n  mutation updateOrderedItem($_id: String!, $ordered: Boolean!) {\n    updateOrderedItem(_id: $_id, ordered: $ordered) {\n      name\n    }\n  }\n"]);return G=function(){return e},e}function H(){var e=Object(a.a)(["\n  mutation updateCompletedItem($_id: String!, $completed: Boolean!) {\n    updateCompletedItem(_id: $_id, completed: $completed) {\n      name\n    }\n  }\n"]);return H=function(){return e},e}function K(){var e=Object(a.a)(["\n  mutation deleteItem($_id: String!) {\n    deleteItem(_id: $_id) {\n      name\n    }\n  }\n"]);return K=function(){return e},e}var U=k()(K()),V=k()(H()),X=k()(G());function Y(e){var n,t=e.name,a=e.id,c=e.completed,o=e.ordered,d=e.shop,u=Object(D.a)(U),s=Object(l.a)(u,1)[0],j=Object(D.a)(V),b=Object(l.a)(j,1)[0],m=Object(D.a)(X),O=Object(l.a)(m,1)[0],f=Object(i.useState)([0]),v=Object(l.a)(f,2),_=v[0],k=v[1],E="checkbox-list-label-".concat(a);return Object(r.jsxs)(I.a,{role:void 0,dense:!0,button:!0,onClick:(n=a,function(){var e=_.indexOf(n),t=Object(h.a)(_);-1===e?t.push(n):t.splice(e,1),k(t)}),children:[Object(r.jsx)(S.a,{children:Object(r.jsx)(y.a,{edge:"start",checked:-1!==_.indexOf(a),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":E},onClick:function(){b({variables:{_id:a,completed:!c}}).then((function(){return window.location.reload()}))}})}),Object(r.jsx)("span",{children:Object(r.jsx)(N,{OpenModal:Object(r.jsx)(w.a,{edge:"end","aria-label":"ordered",children:Object(r.jsx)(x.a,{})}),BodyModal:Object(r.jsx)(z,{id:a,name:t,shop:d})})}),Object(r.jsx)(C.a,{style:{fontWeight:"bold",textDecoration:c||o?"line-through":"none"},id:E,primary:t}),Object(r.jsxs)($.a,{children:[Object(r.jsx)(w.a,{onClick:function(){O({variables:{_id:a,ordered:!o}}).then((function(){return window.location.reload()}))},edge:"end","aria-label":"ordered",children:Object(r.jsx)(g.a,{})}),Object(r.jsx)(w.a,{onClick:function(){window.confirm("Are you sure you want to delete this item?")&&s({variables:{_id:a}}).then((function(){return window.location.reload()}))},edge:"end","aria-label":"delete",children:Object(r.jsx)(p.a,{})})]})]},a)}var Z=t(160),ee=t(155),ne=Object(E.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),te=function(e){var n=e.items,t=ne();return Object(r.jsx)(ee.a,{className:t.root,children:Object(r.jsx)(Z.a,{variant:"outlined",children:Object(r.jsx)(u.a,{children:n.map((function(e){return Object(i.createElement)(Y,Object(m.a)(Object(m.a)({},e),{},{key:e.id}))}))})})})};function ae(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n\n      item {\n        id\n        name\n      }\n    }\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(a.a)(["\n  mutation addItem_API($name: String!, $shopID: [String]) {\n    addItem_API(name: $name, shopID: $shopID) {\n      id\n      name\n      shop {\n        id\n        name\n      }\n    }\n  }\n"]);return re=function(){return e},e}var ie=k()(re()),ce=k()(ae()),oe=function(){var e=Object(D.b)(ce).data,n=Object(D.a)(ie),t=Object(l.a)(n,1)[0],a=Object(i.useState)(""),c=Object(l.a)(a,2),o=c[0],d=c[1],u=Object(i.useState)(),s=Object(l.a)(u,2),j=s[0],b=s[1],m=e?e.shops.map((function(e){return{label:e.name,value:e.id}})):{label:"Loading",value:"1"};return Object(r.jsx)("div",{children:Object(r.jsx)("form",{onSubmit:function(e){var n;j&&j.length>0?(t({variables:{name:o,shopID:(n=j,n.map((function(e){return e.value})))}}).then((function(){return window.location.reload()})),d("")):alert("Select a shop"),e.preventDefault()},children:Object(r.jsxs)(T.a,{container:!0,spacing:3,children:[Object(r.jsx)(T.a,{item:!0,xs:12,sm:5,children:Object(r.jsx)(L.a,{value:o,required:!0,id:"newitem",name:"newitem",label:"Add new item",fullWidth:!0,autoComplete:"given-name",onChange:function(e){d(e.target.value)}})}),Object(r.jsx)(T.a,{item:!0,xs:12,sm:4,children:Object(r.jsx)(R.a,{options:m,value:j,onChange:b,labelledBy:"Select"})}),Object(r.jsx)(T.a,{item:!0,xs:12,sm:3,children:Object(r.jsx)(P.a,{variant:"contained",color:"primary",type:"submit",children:"Add item"})})]})})})};function de(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n    }\n  }\n"]);return de=function(){return e},e}function le(){var e=Object(a.a)(["\n  query getItems {\n    items {\n      id\n      name\n      completed\n      ordered\n      shop {\n        id\n        name\n      }\n    }\n  }\n"]);return le=function(){return e},e}var ue=k()(le()),se=k()(de()),je=function(){var e=function(e){if(t&&e){var n=null;v("0"===e?t.items:t.items.filter((function(t){return t.shop&&(n=t.shop.filter((function(n){return n.id===e}))),n.length>0?t:null})))}},n=Object(D.b)(ue),t=n.data,a=n.loading,c=n.error,o=Object(D.b)(se).data,d=Object(i.useState)(localStorage.getItem("selectedshop")?localStorage.getItem("selectedshop"):""),m=Object(l.a)(d,2),h=m[0],O=m[1],p=Object(i.useState)(),f=Object(l.a)(p,2),x=f[0],v=f[1];if(Object(i.useEffect)((function(){e(localStorage.getItem("selectedshop")?localStorage.getItem("selectedshop"):null)}),[t]),a)return Object(r.jsx)("p",{children:"loading..."});if(c)return Object(r.jsx)("p",{children:"ERROR"});if(!t)return Object(r.jsx)("p",{children:"Not found"});t&&!x&&v(t.items);return Object(r.jsx)("div",{style:{paddingTop:"5%"},children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsxs)(j.a,{labelId:"select-label",id:"select",value:h,onChange:function(n){O(n.target.value),localStorage.setItem("selectedshop",n.target.value),e(n.target.value)},children:[Object(r.jsx)(b.a,{value:"0",children:"All"}),o?o.shops.map((function(e){return Object(r.jsx)(b.a,{value:e.id,children:e.name},e.id)})):Object(r.jsx)(b.a,{value:1,children:"Loading"})]}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(oe,{}),Object(r.jsx)("h1",{children:"ITEMS"}),Object(r.jsx)(te,{items:x?x.filter((function(e){return!e.completed&&!e.ordered})):x})]}),Object(r.jsx)("h1",{children:"ORDERED ITEMS"}),Object(r.jsx)(te,{items:x?x.filter((function(e){return e.ordered&&!e.completed})):x}),Object(r.jsx)("h1",{children:"DONE ITEMS"}),Object(r.jsx)(te,{items:x?x.filter((function(e){return e.completed})):x})]})})})};var be=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)(je,{})})})},me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,169)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),i(e),c(e)}))},he=t(21),Oe=t(90),pe=t(89),fe=t(49);function xe(){var e=Object(a.a)(["\n  {\n    items @client\n  }\n"]);return xe=function(){return e},e}function ve(){var e=Object(a.a)(["\n    extend type Mutation {\n        AddItem(item: Item!): [Item]\n    }\n"]);return ve=function(){return e},e}var ge=k()(ve()),Ie=k()(xe()),Se={Mutation:{addItem:function(e,n,t){var a=n.item,r=t.cache,i=function(e,n){return e.find((function(e){return e.name===n.name}))?(console.log("Item is already added"),e):[].concat(Object(h.a)(e),[n])}(r.readQuery({query:Ie}).items,a);return r.writeQuery({query:Ie,data:{items:i}}),i}}};function ye(){var e=Object(a.a)(["\n  {\n    \n      items\n      {\n        id\n        name    \n        shop{\n          id\n          name      \n        }\n      }\n    \n  }\n  "]);return ye=function(){return e},e}var we=Object(Oe.a)({uri:"https://grocery-list-louise.herokuapp.com/graphql"}),Ce=new pe.a,$e=new fe.a({link:we,cache:Ce,typeDefs:ge,resolvers:Se});$e.query({query:k()(ye())}).then((function(e){return null})),d.a.render(Object(r.jsx)(he.a,{client:$e,children:Object(r.jsx)(be,{})}),document.getElementById("root")),me()}},[[116,1,2]]]);
//# sourceMappingURL=main.f9ea2603.chunk.js.map