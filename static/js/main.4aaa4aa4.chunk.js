(this["webpackJsonpgrocery-list"]=this["webpackJsonpgrocery-list"]||[]).push([[0],{111:function(e,n,t){"use strict";t.r(n);var a=t(22),r=t(9),c=t(0),i=t(14),o=t.n(i),l=(t(99),t(29)),u=t(154),s=t(114),d=t(160),j=t(159),b=t(67),m=t(63),h=t(81),O=t.n(h),f=t(113),p=t(148),v=t(161),x=t(163),g=t(150),y=t(149),I=t(35),S=t.n(I),w=t(36);function k(){var e=Object(a.a)(["\n  mutation deleteItem($_id: String!) {\n    deleteItem(_id: $_id) {\n      name\n    }\n  }\n"]);return k=function(){return e},e}var C=S()(k());function q(e){var n,t=e.name,a=e.id,i=e.shop,o=Object(w.a)(C),u=Object(l.a)(o,1)[0],s=Object(c.useState)([0]),d=Object(l.a)(s,2),j=d[0],b=d[1],h=function(){u({variables:{_id:a}}).then((function(){return window.location.reload()}))},I="checkbox-list-label-".concat(a);return Object(r.jsxs)(f.a,{role:void 0,dense:!0,button:!0,onClick:(n=a,function(){var e=j.indexOf(n),t=Object(m.a)(j);-1===e?t.push(n):t.splice(e,1),b(t)}),children:[Object(r.jsx)(p.a,{children:Object(r.jsx)(v.a,{edge:"start",checked:-1!==j.indexOf(a),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":I},onClick:h})}),Object(r.jsx)(x.a,{style:{fontWeight:"bold",color:"red"},id:I,primary:t}),i?i.map((function(e,n){return Object(r.jsx)(x.a,{id:n,primary:e.name},n)})):null,Object(r.jsx)(g.a,{children:Object(r.jsx)(y.a,{onClick:h,edge:"end","aria-label":"delete",children:Object(r.jsx)(O.a,{})})})]},a)}var A=t(153),D=t(151),$=t(152),_=Object(D.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),P=function(e){var n=e.items,t=_();return Object(r.jsx)($.a,{className:t.root,children:Object(r.jsx)(A.a,{variant:"outlined",children:Object(r.jsx)(u.a,{children:n.map((function(e){return Object(c.createElement)(q,Object(b.a)(Object(b.a)({},e),{},{key:e.id}))}))})})})},E=t(84),F=t(155),L=t(162),N=t(158);function R(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n\n      item {\n        id\n        name\n      }\n    }\n  }\n"]);return R=function(){return e},e}function B(){var e=Object(a.a)(["\n  mutation addItem_API($name: String!, $shopID: [String]) {\n    addItem_API(name: $name, shopID: $shopID) {\n      id\n      name\n      shop {\n        id\n        name\n      }\n    }\n  }\n"]);return B=function(){return e},e}var T=S()(B()),W=S()(R()),J=function(){var e=Object(w.b)(W).data,n=Object(w.a)(T),t=Object(l.a)(n,1)[0],a=Object(c.useState)(""),i=Object(l.a)(a,2),o=i[0],u=i[1],s=Object(c.useState)(),d=Object(l.a)(s,2),j=d[0],b=d[1],m=e?e.shops.map((function(e){return{label:e.name,value:e.id}})):{label:"Loading",value:"1"};return Object(r.jsx)("div",{children:Object(r.jsx)("form",{onSubmit:function(e){var n;t({variables:{name:o,shopID:(n=j,n.map((function(e){return e.value})))}}).then((function(){return window.location.reload()})),u(""),e.preventDefault()},children:Object(r.jsxs)(F.a,{container:!0,spacing:3,children:[Object(r.jsx)(F.a,{item:!0,xs:12,sm:5,children:Object(r.jsx)(L.a,{value:o,required:!0,id:"newitem",name:"newitem",label:"Add new item",fullWidth:!0,autoComplete:"given-name",onChange:function(e){u(e.target.value)}})}),Object(r.jsx)(F.a,{item:!0,xs:12,sm:4,children:Object(r.jsx)(E.a,{options:m,value:j,onChange:b,labelledBy:"Select"})}),Object(r.jsx)(F.a,{item:!0,xs:12,sm:3,children:Object(r.jsx)(N.a,{variant:"contained",color:"primary",type:"submit",children:"Add item"})})]})})})};function M(){var e=Object(a.a)(["\n  query getShops {\n    shops {\n      id\n      name\n    }\n  }\n"]);return M=function(){return e},e}function Q(){var e=Object(a.a)(["\n  query getItems {\n    items {\n      id\n      name\n      shop {\n        id\n        name\n      }\n    }\n  }\n"]);return Q=function(){return e},e}var z=S()(Q()),G=S()(M()),H=function(){var e=function(e){if(t&&e){var n=null;x("0"===e?t.items:t.items.filter((function(t){return t.shop&&(n=t.shop.filter((function(n){return n.id===e}))),n.length>0?t:null})))}},n=Object(w.b)(z),t=n.data,a=n.loading,i=n.error,o=Object(w.b)(G).data,b=Object(c.useState)(localStorage.getItem("selectedshop")?localStorage.getItem("selectedshop"):""),m=Object(l.a)(b,2),h=m[0],O=m[1],f=Object(c.useState)(),p=Object(l.a)(f,2),v=p[0],x=p[1];if(Object(c.useEffect)((function(){e(localStorage.getItem("selectedshop")?localStorage.getItem("selectedshop"):null)}),[t]),a)return Object(r.jsx)("p",{children:"loading..."});if(i)return Object(r.jsx)("p",{children:"ERROR"});if(!t)return Object(r.jsx)("p",{children:"Not found"});t&&!v&&x(t.items);return Object(r.jsx)("div",{style:{paddingTop:"5%"},children:Object(r.jsx)(u.a,{children:Object(r.jsxs)(s.a,{children:[Object(r.jsxs)(d.a,{labelId:"select-label",id:"select",value:h,onChange:function(n){O(n.target.value),localStorage.setItem("selectedshop",n.target.value),e(n.target.value)},children:[Object(r.jsx)(j.a,{value:"0",children:"All"}),o?o.shops.map((function(e){return Object(r.jsx)(j.a,{value:e.id,children:e.name},e.id)})):Object(r.jsx)(j.a,{value:1,children:"Loading"})]}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(J,{}),Object(r.jsx)(P,{items:v})]})]})})})};var K=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)(H,{})})})},U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,165)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),a(e),r(e),c(e),i(e)}))},V=t(19),X=t(83),Y=t(82),Z=t(49);function ee(){var e=Object(a.a)(["\n  {\n    items @client\n  }\n"]);return ee=function(){return e},e}function ne(){var e=Object(a.a)(["\n    extend type Mutation {\n        AddItem(item: Item!): [Item]\n    }\n"]);return ne=function(){return e},e}var te=S()(ne()),ae=S()(ee()),re={Mutation:{addItem:function(e,n,t){var a=n.item,r=t.cache,c=function(e,n){return e.find((function(e){return e.name===n.name}))?(console.log("Item is already added"),e):[].concat(Object(m.a)(e),[n])}(r.readQuery({query:ae}).items,a);return r.writeQuery({query:ae,data:{items:c}}),c}}};function ce(){var e=Object(a.a)(["\n  {\n    \n      items\n      {\n        id\n        name    \n        shop{\n          id\n          name      \n        }\n      }\n    \n  }\n  "]);return ce=function(){return e},e}var ie=Object(X.a)({uri:"https://grocery-list-louise.herokuapp.com/graphql"}),oe=new Y.a,le=new Z.a({link:ie,cache:oe,typeDefs:te,resolvers:re});le.query({query:S()(ce())}).then((function(e){return null})),o.a.render(Object(r.jsx)(V.a,{client:le,children:Object(r.jsx)(K,{})}),document.getElementById("root")),U()},99:function(e,n,t){}},[[111,1,2]]]);
//# sourceMappingURL=main.4aaa4aa4.chunk.js.map